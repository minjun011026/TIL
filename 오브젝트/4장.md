# 4장
> 객체지향 설계란 올바른 객체에게 올바른 책임을 할당하면서 낮은 결합도와 높은 응집도를 가진 구조를 창조하는 활동이다.

객체지향 설계에서는 두 가지 방법을 통해 시스템을 객체로 분할할 수 있다.
1. 상태(데이터)를 분할의 중심축으로 삼는 방법
2. 책임을 분할의 중심축으로 삼는 방법

데이터 중심의 관점에서 객체는 자신이 포함하고 있는 데이터를 조작하는데 필요한 오퍼레이션을 정의한다.   
책임 중심의 관점에서 객체는 다른 객체가 요청할 수 있는 오퍼레이션을 위해 필요한 상태를 보관한다.

객체의 상태는 구현에 속한다. 구현은 불안정하기에 변하기 쉽다.   
상태를 객체 분할의 중심축으로 삼으면 구현에 대한 세부사항이 객체의 인터페이스에 스며들게 되어 캡슐화의 원칙이 무너진다.   
결과적으로 상태 변경은 인터페이스의 변경을 초래하고 해당 인터페이스에 의존하는 모든 객체에게 변경의 영향이 퍼지게 된다.   
-> **데이터에 초점을 맞추는 설계는 변경에 취약하다.**

설계가 필요한 이유는 요구사항이 변경되기 때문이고 캡슐화가 중요한 이유는 불안정한 부분과 안정적인 부분을 분리해서 변경의 영향을 통제할 수 있기 때문이다.

그렇다면 객체 내부에 무엇을 캡슐화해야 하는가?    
**변경될 수 있는 어떤 것이라도 캡슐화해야 한다!**

### 응집도와 결합도
**응집도** : 모듈에 포함된 내부 요소들이 연관돼 있는 정도 -> 객체 또는 클래스에 얼마나 관련 높은 책임들을 할당했는가   
**결합도** : 의존성의 정도 -> 객체 또는 클래스가 협력에 필요한 적절한 수준의 관계만을 유지하고 있는가

객체를 설계할 때 "이 객체가 어떤 데이터를 포함해야 하는가?"라는 질문은 다음과 같은 2개의 개별적인 질문으로 분리해야 한다.
+ 이 객체가 어떤 데이터를 포함해야 하는가?
+ 이 객체가 데이터에 대해 수행해야 하는 오퍼레이션은 무엇인가?

**파급 효과(ripple effect)** : 내부 구현의 변경이 외부로 퍼져나가는 현상

#### 캡슐화의 진정한 의미
캡슐화는 변경될 수 있는 어떤 것이라도 감추는 것을 의미한다.      
내부 속성을 외부로부터 감추는 데이터 캡슐화는 캡슐화의 한 종류일 뿐이다.   

### 데이터 중심 설계의 문제점
1. 데이터 중심의 설계는 본질적으로 너무 이른 시기에 데이터에 관해 결정하도록 강요한다.
2. 데이터 중심의 설계에서는 협력이라는 문맥을 고려하지 않고 객체를 고립시킨 채 오퍼레이션을 결정한다.

데이터 중심의 설계는 실행 문맥에 대한 깊이 있는 고민 없이 객체가 관리할 세부 정보를 먼저 결정한다.   
객체의 구현이 이미 결정된 상태에서 다른 객체와의 협력 방법을 고민하기 때문에 이미 구현된 객체의 인터페이스를 억지로 끼워맞출 수 밖에 없다.